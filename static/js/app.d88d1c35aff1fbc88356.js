webpackJsonp([1],{"+BTi":function(e,t){},FWDa:function(e,t){},GXEp:function(e,t){},I4nB:function(e,t){},JWSb:function(e,t){},M93x:function(e,t,n){"use strict";var o={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{attrs:{id:"app"}},[t("router-view")],1)},staticRenderFns:[]};var a=n("VU/8")(null,o,!1,function(e){n("FWDa")},null,null);t.a=a.exports},NHnr:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){var t=n("I4nB"),o=(n.n(t),n("+BTi")),a=(n.n(o),n("STLj")),i=n.n(a),s=n("cDSy"),r=(n.n(s),n("e0Bm")),c=n.n(r),l=n("uKbn"),d=(n.n(l),n("GegP")),u=n.n(d),f=n("GXEp"),p=(n.n(f),n("mtrD")),h=n.n(p),v=n("jAzQ"),g=(n.n(v),n("wOhx")),w=n.n(g),m=n("7+uW"),E=n("M93x"),M=n("YaEn"),b=n("tvR6"),D=(n.n(b),n("5Img")),A=n.n(D);m.default.use(w.a),m.default.use(h.a),m.default.use(u.a),m.default.use(c.a),m.default.use(i.a),m.default.config.productionTip=!1,e.DelayMapBatch=A.a,new m.default({el:"#app",router:M.a,components:{App:E.a},template:"<App/>"})}.call(t,n("DuR2"))},"Wg8/":function(e,t,n){e.exports=function(){return n("qDT4")('!function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:r})},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="./",n(n.s="Wg8/")}({"Wg8/":function(e,t){self.addEventListener("message",function(e){let t={},n=e.data.imgData,r=n.width*n.height,o=(new Date).getTime();for(let e=0;e<r;e++){let l=(a=n.data[4*e],i=n.data[4*e+1],s=n.data[4*e+2],("00"+a.toString(16)).slice(-2)+("00"+i.toString(16)).slice(-2)+("00"+s.toString(16)).slice(-2));t[l]?t[l]++:t[l]=1;let c=(new Date).getTime();c-o>1e3&&(o=c,self.postMessage({progress:e/r}))}var a,i,s;self.postMessage({colorDist:t})})}});\n//# sourceMappingURL=f6da9933392bd28970ae.worker.js.map',null)}},YaEn:function(e,t,n){"use strict";var o=n("7+uW"),a=n("/ocq"),i=n("woOf"),s=n.n(i),r=n("fZjL"),c=n.n(r),l=(n("cwe7"),n("+BTi"),n("2X9z")),d=n.n(l),u=n("//Fk"),f=n.n(u),p=n("rxKx"),h=n.n(p),v=n("Wg8/"),g=n.n(v);function w(e){return[parseInt(e.slice(0,2),16),parseInt(e.slice(2,4),16),parseInt(e.slice(4,6),16)]}function m(e){var t=parseInt(e.slice(0,2),16),n=parseInt(e.slice(2,4),16),o=parseInt(e.slice(4,6),16);return[-.1678*t-.3313*n+.5*o+128,.299*t+.587*n+.114*o,.5*t-.4187*n-.0813*o+128]}function E(e){var t=void 0,n=void 0,o=void 0,a=parseInt(e.slice(0,2),16)/255,i=parseInt(e.slice(2,4),16)/255,s=parseInt(e.slice(4,6),16)/255,r=Math.max(a,i,s),c=r-Math.min(a,i,s);if(o=r,0==c)t=0;else switch(r){case a:t=60*(i-s)/c;break;case i:t=120+60*(s-a)/c;break;case s:t=240+60*(a-i)/c}return t<0&&(t+=360),n=0==r?0:c/r,[n*=255,o*=255,t*=255/360]}window.THREE=n("Ml+6");var M=130,b=130,D=130,A={data:function(){return{progress:void 0,uploadLock:!1,colorDist:void 0,colorMode:"RGB",colorModeAll:[{value:"RGB"},{value:"YUV"},{value:"HSV"}],speed:3,speedDistance:10,speedDistanceWheel:30,horAngle:0,verAngle:0,distance:520,distanceOrig:520,distanceMax:1e3,mouseHorAngle:0,mouseVerAngle:0,offsetHorAngle:0,offsetVerAngle:0,offsetDistance:0,camera:void 0,ballsGrp:void 0,points:void 0,pointsGeometry:void 0,pointsMaterial:void 0}},watch:{colorMode:function(){this.updateColorDist()},colorDist:function(){this.updateColorDist()}},methods:{fileUploaded:function(e){var t=this;return this.uploadLock=!0,new f.a(function(t,n){var o=new FileReader;o.addEventListener("load",function(e){t(e.target.result)}),o.readAsDataURL(e)}).then(function(e){return new f.a(function(t,n){var o=new Image;o.addEventListener("load",function(){t(this)}),o.addEventListener("error",function(e){d.a.error("Invalid image file format."),n()}),o.src=e})}).then(function(e){t.colorDist=void 0;var n=document.createElement("canvas");n.width=e.width,n.height=e.height;var o=n.getContext("2d");o.drawImage(e,0,0,e.width,e.height,0,0,n.width,n.height);var a=o.getImageData(0,0,n.width,n.height);return new f.a(function(e,n){var o=new g.a;o.addEventListener("message",function(n){n.data.colorDist?(t.progress=100,e(n.data.colorDist)):n.data.progress&&(t.progress=parseInt(100*n.data.progress))}),t.progress=0,o.postMessage({imgData:a})})}).then(function(e){t.colorDist=c()(e)}).catch(function(e){if(t.uploadLock=!1,e)throw e}),!1},updateColorDist:function(){var e=this;void 0!==this.colorDist&&(this.uploadLock=!0,this.points&&(this.pointsGeometry.dispose(),this.pointsMaterial.dispose(),this.ballsGrp.remove(this.points)),this.$nextTick(function(){e.pointsGeometry=new THREE.Geometry,e.pointsGeometry.colors=[],DelayMapBatch(e.colorDist,function(t){var n={RGB:w,YUV:m,HSV:E}[e.colorMode](t),o=Math.random()-.5,a=Math.random()-.5,i=Math.random()-.5;e.pointsGeometry.vertices.push(new THREE.Vector3(n[0]+o,n[1]+a,n[2]+i)),e.pointsGeometry.colors.push(new THREE.Color(parseInt(t,16)))},{batchSize:1e4}).then(function(){e.pointsMaterial=new THREE.PointsMaterial({vertexColors:!0}),e.points=new THREE.Points(e.pointsGeometry,e.pointsMaterial),s()(e.points.position,{x:2,y:2,z:2}),e.ballsGrp.add(e.points),e.progress=void 0,e.uploadLock=!1}).catch(function(t){if(e.uploadLock=!1,t)throw t})}))},onPanning:function(e){console.log(e)}},mounted:function(){var e=this,t=this.$refs.webglContainer,n=new THREE.Scene;n.background=new THREE.Color(65793);var o=new THREE.AmbientLight(16777215,.5);n.add(o),(i=new THREE.DirectionalLight(16777215,.2)).position.set(0,2e3,3e3),n.add(i);var a=new THREE.Group;n.add(a),a.position.x=0,a.position.y=1,a.position.z=0,this.ballsGrp=a;var i,s=new THREE.CubeGeometry(260,260,260),r=new THREE.MeshPhongMaterial({color:16777215,side:THREE.BackSide,transparent:!0,opacity:.9}),c=new THREE.Mesh(s,r);c.position.x=M,c.position.y=b,c.position.z=D,a.add(c),(i=new THREE.PointLight(16777215,.3)).position.set(130,130,130),a.add(i);var l=new THREE.WebGLRenderer({antialias:!0});l.setPixelRatio(window.devicePixelRatio),l.setSize(t.offsetWidth,t.offsetHeight),t.appendChild(l.domElement);var d=new THREE.PerspectiveCamera(45,t.offsetWidth/t.offsetHeight,1,4e3);this.camera=d,window.addEventListener("resize",function(){var e=t.offsetWidth,n=t.offsetHeight;l.setSize(e,n),d.aspect=e/n,d.updateProjectionMatrix()});!function t(){e.verAngle+=e.offsetVerAngle,e.verAngle<=-89?e.verAngle=-89:e.verAngle>=89&&(e.verAngle=89),e.horAngle+=e.offsetHorAngle,e.distance+=e.offsetDistance,e.distance>=e.distanceMax?e.distance=e.distanceMax:e.distance<=1&&(e.distance=1);var o=e.distance*Math.sin(e.horAngle*Math.PI/180)*Math.cos(e.verAngle*Math.PI/180)+M,a=e.distance*Math.sin(e.verAngle*Math.PI/180)+b,i=e.distance*Math.cos(e.horAngle*Math.PI/180)*Math.cos(e.verAngle*Math.PI/180)+b;d.position.set(o,a,i),d.lookAt(new THREE.Vector3(M,b,D)),d.up=new THREE.Vector3(0,1,0),l.render(n,e.camera),requestAnimationFrame(t)}(),window.addEventListener("keydown",function(t){switch(t.keyCode){case 38:e.offsetVerAngle=e.speed;break;case 40:e.offsetVerAngle=-e.speed;break;case 37:e.offsetHorAngle=-e.speed;break;case 39:e.offsetHorAngle=e.speed;break;case 109:case 189:e.offsetDistance=e.speedDistance;break;case 107:case 187:e.offsetDistance=-e.speedDistance}}),window.addEventListener("keyup",function(t){switch(t.keyCode){case 38:case 40:e.offsetVerAngle=0;break;case 37:case 39:e.offsetHorAngle=0;break;case 109:case 189:case 107:case 187:e.offsetDistance=0}}),window.addEventListener("wheel",function(t){t.deltaY<0?e.distance+=e.speedDistanceWheel:t.deltaY>0&&(e.distance-=e.speedDistanceWheel)});var u=new h.a(this.$refs.webglContainer,{});u.get("pan").set({direction:h.a.DIRECTION_ALL}),u.get("swipe").set({enabled:!1}),u.get("pinch").set({enable:!0}),u.on("pan",function(t){e.offsetHorAngle=-t.velocityX*e.speed,e.offsetVerAngle=t.velocityY*e.speed}),u.on("panend",function(){e.offsetHorAngle=e.offsetVerAngle=0}),u.on("pinchmove",function(t){e.distance=e.distanceOrig+e.distanceMax/2*(1-t.scale)}),u.on("pinchend",function(t){e.distanceOrig=e.distance}),u.on("mousewheel",function(e){console.log(e)})}},H={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"ColorDist"},[n("div",{ref:"webglContainer",attrs:{id:"webgl_container"}}),e._v(" "),n("div",{staticClass:"toolbar-container"},[n("el-upload",{staticClass:"upload-container",attrs:{action:"","show-file-list":!1,"before-upload":e.fileUploaded,disabled:e.uploadLock}},[n("el-button",{attrs:{size:"small",circle:"",icon:"el-icon-upload2",disabled:e.uploadLock}})],1),e._v(" "),n("el-select",{staticClass:"selectColorMode",attrs:{size:"mini",disabled:e.uploadLock},model:{value:e.colorMode,callback:function(t){e.colorMode=t},expression:"colorMode"}},e._l(e.colorModeAll,function(e){return n("el-option",{key:e.value,attrs:{value:e.value,label:e.value}})}))],1),e._v(" "),n("el-progress",{directives:[{name:"show",rawName:"v-show",value:void 0!==e.progress,expression:"undefined !== progress"}],attrs:{"show-text":!1,"stroke-width":4,percentage:e.progress}})],1)},staticRenderFns:[]};var R=n("VU/8")(A,H,!1,function(e){n("mvB2"),n("JWSb")},"data-v-93e581b2",null).exports;o.default.use(a.a);var k=new a.a({routes:[{path:"/",name:"Color Distribution",component:R}]});k.beforeEach(function(e,t,n){document.title=e.name,n()});t.a=k},cDSy:function(e,t){},cwe7:function(e,t){},jAzQ:function(e,t){},mvB2:function(e,t){},tvR6:function(e,t){},uKbn:function(e,t){}},["NHnr"]);
//# sourceMappingURL=app.d88d1c35aff1fbc88356.js.map